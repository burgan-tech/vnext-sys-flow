{
  "key": "sys-extensions",
  "version": "1.0.0",
  "domain": "core",
  "flow": "sys-flows",
  "flowVersion": "1.0.0",
  "tags": [
    "Core",
    "Extension",
    "Lifecycle",
    "Repository"
  ],
  "attributes": {
    "timeout": null,
    "type": "F",
    "labels": [
      {
        "language": "en-US",
        "label": "Extension Lifecycle Management"
      },
      {
        "language": "tr-TR",
        "label": "Eklenti Yaşam Döngüsü Yönetimi"
      }
    ],
    "functions": [],
    "sharedTransitions": [],
    "extensions": [],
    "features": [],
    "startTransition": {
      "key": "create",
      "target": "draft",
      "triggerType": 0,
      "labels": [
        {
          "language": "en-US",
          "label": "Create Extension"
        },
        {
          "language": "tr-TR",
          "label": "Eklenti Oluştur"
        }
      ],
      "versionStrategy": "Minor",
      "schema": null,
      "onExecutionTasks": [],
      "view": null
    },
    "states": [
      {
        "key": "draft",
        "stateType": 1,
        "labels": [
          {
            "language": "en-US",
            "label": "Draft State"
          },
          {
            "language": "tr-TR",
            "label": "Taslak Durumu"
          }
        ],
        "transitions": [
          {
            "key": "activate",
            "from": "draft",
            "target": "active",
            "triggerType": 0,
            "labels": [
              {
                "language": "en-US",
                "label": "Activate Extension"
              },
              {
                "language": "tr-TR",
                "label": "Eklentiyi Aktifleştir"
              }
            ],
            "versionStrategy": "Minor",
            "onExecutionTasks": [
              {
                "order": 1,
                "task": {
                  "ref": "Tasks/invalidate-cache.json"
                },
                "mapping": {
                  "location": "./src/InvalideCacheMapping.csx",
                  "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKdXNpbmcgQkJULldvcmtmbG93LkRlZmluaXRpb25zOwoKcHVibGljIGNsYXNzIEludmFsaWRhdGVDYWNoZU1hcHBpbmcgOiBJTWFwcGluZwp7CiAgcHVibGljIFRhc2s8U2NyaXB0UmVzcG9uc2U+IElucHV0SGFuZGxlcihXb3JrZmxvd1Rhc2sgdGFzaywgU2NyaXB0Q29udGV4dCBjb250ZXh0KQogIHsKICAgIHZhciBkYXByVGFzayA9IHRhc2sgYXMgRGFwclNlcnZpY2VUYXNrOwogICAgZGFwclRhc2suU2V0TWV0aG9kTmFtZSgiL2FwaS92MS9hZG1pbi9pbnZhbGlkYXRlIik7CiAgICB2YXIgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5HZXRFbnZpcm9ubWVudFZhcmlhYmxlKCJBU1BORVRDT1JFX0VOVklST05NRU5UIik7CgogICAgaWYgKGVudmlyb25tZW50ID09ICJEZXZlbG9wbWVudCIpCiAgICB7CiAgICAgIC8vIExvY2FsIGRldmVsb3BtZW50CiAgICAgIGRhcHJUYXNrLlNldEFwcElkKCJ2bmV4dC1hcHAiKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgZGFwclRhc2suU2V0QXBwSWQoJCJhbW9ycGhpZS12bmV4dC57ZW52aXJvbm1lbnQuVG9Mb3dlcigpfS1hbW9ycGhpZS12bmV4dCIpOwogICAgfQoKICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQobmV3IFNjcmlwdFJlc3BvbnNlCiAgICB7CiAgICAgIERhdGEgPSBuZXcKICAgICAgewogICAgICAgIGtleSA9IGNvbnRleHQuSW5zdGFuY2UuS2V5LAogICAgICAgIGZsb3cgPSBjb250ZXh0LldvcmtmbG93LktleSwKICAgICAgICBkb21haW4gPSBjb250ZXh0LlJ1bnRpbWUuRG9tYWluLAogICAgICAgIHZlcnNpb24gPSBjb250ZXh0Lkluc3RhbmNlLkxhdGVzdERhdGE/LlZlcnNpb24gPz8gIjEuMC4wIgogICAgICB9LAogICAgICBIZWFkZXJzID0gbnVsbAogICAgfSk7CiAgfQoKICBwdWJsaWMgVGFzazxTY3JpcHRSZXNwb25zZT4gT3V0cHV0SGFuZGxlcihTY3JpcHRDb250ZXh0IGNvbnRleHQpCiAgewogICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdChuZXcgU2NyaXB0UmVzcG9uc2UoKSk7CiAgfQp9Cg=="
                }
              },
              {
                "order": 1,
                "task": {
                  "ref": "Tasks/invalidate-cache.json"
                },
                "mapping": {
                  "location": "./src/InvalideCacheExecutionMapping.csx",
                  "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKdXNpbmcgQkJULldvcmtmbG93LkRlZmluaXRpb25zOwoKcHVibGljIGNsYXNzIEludmFsaWRlQ2FjaGVFeGVjdXRpb25NYXBwaW5nIDogSU1hcHBpbmcKewogIHB1YmxpYyBUYXNrPFNjcmlwdFJlc3BvbnNlPiBJbnB1dEhhbmRsZXIoV29ya2Zsb3dUYXNrIHRhc2ssIFNjcmlwdENvbnRleHQgY29udGV4dCkKICB7CiAgICB2YXIgZGFwclRhc2sgPSB0YXNrIGFzIERhcHJTZXJ2aWNlVGFzazsKICAgIGRhcHJUYXNrLlNldE1ldGhvZE5hbWUoIi9hcGkvdjEvdXRpbGl0aWVzL2ludmFsaWRhdGUiKTsKICAgIHZhciBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50LkdldEVudmlyb25tZW50VmFyaWFibGUoIkFTUE5FVENPUkVfRU5WSVJPTk1FTlQiKTsKCiAgICBpZiAoZW52aXJvbm1lbnQgPT0gIkRldmVsb3BtZW50IikKICAgIHsKICAgICAgLy8gTG9jYWwgZGV2ZWxvcG1lbnQKICAgICAgZGFwclRhc2suU2V0QXBwSWQoInZuZXh0LWV4ZWN1dGlvbi1hcHAiKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgZGFwclRhc2suU2V0QXBwSWQoJCJhbW9ycGhpZS12bmV4dC1leGVjdXRpb24ue2Vudmlyb25tZW50LlRvTG93ZXIoKX0tYW1vcnBoaWUtdm5leHQtZXhlY3V0aW9uIik7CiAgICB9CgogICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdChuZXcgU2NyaXB0UmVzcG9uc2UKICAgIHsKICAgICAgRGF0YSA9IG5ldwogICAgICB7CiAgICAgICAga2V5ID0gY29udGV4dC5JbnN0YW5jZS5LZXksCiAgICAgICAgZmxvdyA9IGNvbnRleHQuV29ya2Zsb3cuS2V5LAogICAgICAgIGRvbWFpbiA9IGNvbnRleHQuUnVudGltZS5Eb21haW4sCiAgICAgICAgdmVyc2lvbiA9IGNvbnRleHQuSW5zdGFuY2UuTGF0ZXN0RGF0YT8uVmVyc2lvbiA/PyAiMS4wLjAiCiAgICAgIH0sCiAgICAgIEhlYWRlcnMgPSBudWxsCiAgICB9KTsKICB9CgogIHB1YmxpYyBUYXNrPFNjcmlwdFJlc3BvbnNlPiBPdXRwdXRIYW5kbGVyKFNjcmlwdENvbnRleHQgY29udGV4dCkKICB7CiAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0KG5ldyBTY3JpcHRSZXNwb25zZSgpKTsKICB9Cn0K"
                }
              }
            ],
            "view": null
          },
          {
            "key": "delete",
            "from": "draft",
            "target": "deleted",
            "triggerType": 0,
            "labels": [
              {
                "language": "en-US",
                "label": "Delete Draft"
              },
              {
                "language": "tr-TR",
                "label": "Taslağı Sil"
              }
            ],
            "versionStrategy": "Minor",
            "onExecutionTasks": [],
            "view": null
          }
        ],
        "view": null,
        "onEntries": [],
        "onExitss": [],
        "versionStrategy": "Minor"
      },
      {
        "key": "active",
        "stateType": 2,
        "labels": [
          {
            "language": "en-US",
            "label": "Active State"
          },
          {
            "language": "tr-TR",
            "label": "Aktif Durumu"
          }
        ],
        "transitions": [
          {
            "key": "deactivate",
            "from": "active",
            "target": "passive",
            "triggerType": 0,
            "labels": [
              {
                "language": "en-US",
                "label": "Deactivate Extension"
              },
              {
                "language": "tr-TR",
                "label": "Eklentiyi Pasifleştir"
              }
            ],
            "versionStrategy": "Minor",
            "onExecutionTasks": [],
            "view": null
          },
          {
            "key": "update",
            "from": "active",
            "target": "active",
            "triggerType": 0,
            "labels": [
              {
                "language": "en-US",
                "label": "Update Extension"
              },
              {
                "language": "tr-TR",
                "label": "Eklentiyi Güncelle"
              }
            ],
            "versionStrategy": "Minor",
            "onExecutionTasks": [
              {
                "order": 1,
                "task": {
                  "ref": "Tasks/invalidate-cache.json"
                },
                "mapping": {
                  "location": "./src/InvalideCacheMapping.csx",
                  "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKdXNpbmcgQkJULldvcmtmbG93LkRlZmluaXRpb25zOwoKcHVibGljIGNsYXNzIEludmFsaWRhdGVDYWNoZU1hcHBpbmcgOiBJTWFwcGluZwp7CiAgcHVibGljIFRhc2s8U2NyaXB0UmVzcG9uc2U+IElucHV0SGFuZGxlcihXb3JrZmxvd1Rhc2sgdGFzaywgU2NyaXB0Q29udGV4dCBjb250ZXh0KQogIHsKICAgIHZhciBkYXByVGFzayA9IHRhc2sgYXMgRGFwclNlcnZpY2VUYXNrOwogICAgZGFwclRhc2suU2V0TWV0aG9kTmFtZSgiL2FwaS92MS9hZG1pbi9pbnZhbGlkYXRlIik7CiAgICB2YXIgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5HZXRFbnZpcm9ubWVudFZhcmlhYmxlKCJBU1BORVRDT1JFX0VOVklST05NRU5UIik7CgogICAgaWYgKGVudmlyb25tZW50ID09ICJEZXZlbG9wbWVudCIpCiAgICB7CiAgICAgIC8vIExvY2FsIGRldmVsb3BtZW50CiAgICAgIGRhcHJUYXNrLlNldEFwcElkKCJ2bmV4dC1hcHAiKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgZGFwclRhc2suU2V0QXBwSWQoJCJhbW9ycGhpZS12bmV4dC57ZW52aXJvbm1lbnQuVG9Mb3dlcigpfS1hbW9ycGhpZS12bmV4dCIpOwogICAgfQoKICAgIHJldHVybiBUYXNrLkZyb21SZXN1bHQobmV3IFNjcmlwdFJlc3BvbnNlCiAgICB7CiAgICAgIERhdGEgPSBuZXcKICAgICAgewogICAgICAgIGtleSA9IGNvbnRleHQuSW5zdGFuY2UuS2V5LAogICAgICAgIGZsb3cgPSBjb250ZXh0LldvcmtmbG93LktleSwKICAgICAgICBkb21haW4gPSBjb250ZXh0LlJ1bnRpbWUuRG9tYWluLAogICAgICAgIHZlcnNpb24gPSBjb250ZXh0Lkluc3RhbmNlLkxhdGVzdERhdGE/LlZlcnNpb24gPz8gIjEuMC4wIgogICAgICB9LAogICAgICBIZWFkZXJzID0gbnVsbAogICAgfSk7CiAgfQoKICBwdWJsaWMgVGFzazxTY3JpcHRSZXNwb25zZT4gT3V0cHV0SGFuZGxlcihTY3JpcHRDb250ZXh0IGNvbnRleHQpCiAgewogICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdChuZXcgU2NyaXB0UmVzcG9uc2UoKSk7CiAgfQp9Cg=="
                }
              },
              {
                "order": 1,
                "task": {
                  "ref": "Tasks/invalidate-cache.json"
                },
                "mapping": {
                  "location": "./src/InvalideCacheExecutionMapping.csx",
                  "code": "dXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrczsKdXNpbmcgQkJULldvcmtmbG93LlNjcmlwdGluZzsKdXNpbmcgQkJULldvcmtmbG93LkRlZmluaXRpb25zOwoKcHVibGljIGNsYXNzIEludmFsaWRlQ2FjaGVFeGVjdXRpb25NYXBwaW5nIDogSU1hcHBpbmcKewogIHB1YmxpYyBUYXNrPFNjcmlwdFJlc3BvbnNlPiBJbnB1dEhhbmRsZXIoV29ya2Zsb3dUYXNrIHRhc2ssIFNjcmlwdENvbnRleHQgY29udGV4dCkKICB7CiAgICB2YXIgZGFwclRhc2sgPSB0YXNrIGFzIERhcHJTZXJ2aWNlVGFzazsKICAgIGRhcHJUYXNrLlNldE1ldGhvZE5hbWUoIi9hcGkvdjEvdXRpbGl0aWVzL2ludmFsaWRhdGUiKTsKICAgIHZhciBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50LkdldEVudmlyb25tZW50VmFyaWFibGUoIkFTUE5FVENPUkVfRU5WSVJPTk1FTlQiKTsKCiAgICBpZiAoZW52aXJvbm1lbnQgPT0gIkRldmVsb3BtZW50IikKICAgIHsKICAgICAgLy8gTG9jYWwgZGV2ZWxvcG1lbnQKICAgICAgZGFwclRhc2suU2V0QXBwSWQoInZuZXh0LWV4ZWN1dGlvbi1hcHAiKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgZGFwclRhc2suU2V0QXBwSWQoJCJhbW9ycGhpZS12bmV4dC1leGVjdXRpb24ue2Vudmlyb25tZW50LlRvTG93ZXIoKX0tYW1vcnBoaWUtdm5leHQtZXhlY3V0aW9uIik7CiAgICB9CgogICAgcmV0dXJuIFRhc2suRnJvbVJlc3VsdChuZXcgU2NyaXB0UmVzcG9uc2UKICAgIHsKICAgICAgRGF0YSA9IG5ldwogICAgICB7CiAgICAgICAga2V5ID0gY29udGV4dC5JbnN0YW5jZS5LZXksCiAgICAgICAgZmxvdyA9IGNvbnRleHQuV29ya2Zsb3cuS2V5LAogICAgICAgIGRvbWFpbiA9IGNvbnRleHQuUnVudGltZS5Eb21haW4sCiAgICAgICAgdmVyc2lvbiA9IGNvbnRleHQuSW5zdGFuY2UuTGF0ZXN0RGF0YT8uVmVyc2lvbiA/PyAiMS4wLjAiCiAgICAgIH0sCiAgICAgIEhlYWRlcnMgPSBudWxsCiAgICB9KTsKICB9CgogIHB1YmxpYyBUYXNrPFNjcmlwdFJlc3BvbnNlPiBPdXRwdXRIYW5kbGVyKFNjcmlwdENvbnRleHQgY29udGV4dCkKICB7CiAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0KG5ldyBTY3JpcHRSZXNwb25zZSgpKTsKICB9Cn0K"
                }
              }
            ],
            "view": null
          }
        ],
        "view": null,
        "onEntries": [],
        "onExitss": [],
        "versionStrategy": "Minor"
      },
      {
        "key": "passive",
        "stateType": 2,
        "labels": [
          {
            "language": "en-US",
            "label": "Passive State"
          },
          {
            "language": "tr-TR",
            "label": "Pasif Durumu"
          }
        ],
        "transitions": [
          {
            "key": "reactivate",
            "from": "passive",
            "target": "active",
            "triggerType": 0,
            "labels": [
              {
                "language": "en-US",
                "label": "Reactivate Extension"
              },
              {
                "language": "tr-TR",
                "label": "Eklentiyi Yeniden Aktifleştir"
              }
            ],
            "versionStrategy": "Minor",
            "onExecutionTasks": [],
            "view": null
          },
          {
            "key": "archive",
            "from": "passive",
            "target": "deleted",
            "triggerType": 0,
            "labels": [
              {
                "language": "en-US",
                "label": "Archive Extension"
              },
              {
                "language": "tr-TR",
                "label": "Eklentiyi Arşivle"
              }
            ],
            "versionStrategy": "Minor",
            "onExecutionTasks": [],
            "view": null
          }
        ],
        "view": null,
        "onEntries": [],
        "onExitss": [],
        "versionStrategy": "Minor"
      },
      {
        "key": "deleted",
        "stateType": 2,
        "labels": [
          {
            "language": "en-US",
            "label": "Deleted State"
          },
          {
            "language": "tr-TR",
            "label": "Silinmiş Durum"
          }
        ],
        "transitions": [
          {
            "key": "recover",
            "from": "deleted",
            "target": "active",
            "triggerType": 0,
            "labels": [
              {
                "language": "en-US",
                "label": "Recover"
              },
              {
                "language": "tr-TR",
                "label": "Geri Al"
              }
            ],
            "versionStrategy": "Minor",
            "onExecutionTasks": [],
            "view": null
          }
        ],
        "view": null,
        "onEntries": [],
        "onExitss": [],
        "versionStrategy": "Minor"
      }
    ]
  },
  "data": [
    {
      "key": "available-transitions",
      "version": "1.0.0",
      "tags": [
        "core",
        "sys-extensions",
        "components"
      ],
      "attributes": {
        "type": 1,
        "scope": 1,
        "task": {
          "order": 1,
          "task": {
            "ref": "Tasks/available-transitions.json"
          },
          "mapping": {
            "location": "./src/AvailableTransitionMapping.csx",
            "code": "dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOwp1c2luZyBCQlQuV29ya2Zsb3cuRGVmaW5pdGlvbnM7CgpuYW1lc3BhY2UgQkJULldvcmtmbG93LlNjcmlwdGluZzsKCnB1YmxpYyBjbGFzcyBBdmFpbGFibGVUcmFuc2l0aW9uTWFwcGluZyA6IElNYXBwaW5nCnsKICBwdWJsaWMgVGFzazxTY3JpcHRSZXNwb25zZT4gSW5wdXRIYW5kbGVyKFdvcmtmbG93VGFzayB0YXNrLCBTY3JpcHRDb250ZXh0IGNvbnRleHQpCiAgewogICAgdmFyIGRhcHJUYXNrID0gdGFzayBhcyBEYXByU2VydmljZVRhc2s7CiAgICB2YXIgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5HZXRFbnZpcm9ubWVudFZhcmlhYmxlKCJBU1BORVRDT1JFX0VOVklST05NRU5UIik7CgogICAgaWYgKGVudmlyb25tZW50ID09ICJEZXZlbG9wbWVudCIpCiAgICB7CiAgICAgIC8vIExvY2FsIGRldmVsb3BtZW50CiAgICAgIGRhcHJUYXNrLlNldEFwcElkKCJ2bmV4dC1hcHAiKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgZGFwclRhc2suU2V0QXBwSWQoJCJhbW9ycGhpZS12bmV4dC57ZW52aXJvbm1lbnQuVG9Mb3dlcigpfS1hbW9ycGhpZS12bmV4dCIpOwogICAgfQoKICAgIHZhciBtZXRob2ROYW1lID0gZGFwclRhc2shLk1ldGhvZE5hbWUKICAgICAgICAuUmVwbGFjZSgie2RvbWFpbn0iLCBjb250ZXh0LlJ1bnRpbWUuRG9tYWluKQogICAgICAgIC5SZXBsYWNlKCJ7d29ya2Zsb3d9IiwgY29udGV4dC5Xb3JrZmxvdy5LZXkpCiAgICAgICAgLlJlcGxhY2UoIntpbnN0YW5jZX0iLCBjb250ZXh0Lkluc3RhbmNlLktleSk7CiAgICBkYXByVGFzay5TZXRNZXRob2ROYW1lKG1ldGhvZE5hbWUgKyAkIj92ZXJzaW9uPXtjb250ZXh0LldvcmtmbG93LlZlcnNpb259Iik7CiAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0KG5ldyBTY3JpcHRSZXNwb25zZSgpKTsKICB9CgogIHB1YmxpYyBUYXNrPFNjcmlwdFJlc3BvbnNlPiBPdXRwdXRIYW5kbGVyKFNjcmlwdENvbnRleHQgY29udGV4dCkKICB7CiAgICByZXR1cm4gVGFzay5Gcm9tUmVzdWx0KG5ldyBTY3JpcHRSZXNwb25zZQogICAgewogICAgICBEYXRhID0gbmV3CiAgICAgIHsKICAgICAgICBpdGVtcyA9IGNvbnRleHQuQm9keT8uZGF0YT8uaXRlbXMsCiAgICAgICAgc3RhdHVzID0gY29udGV4dC5Cb2R5Py5kYXRhPy5zdGF0dXMsCiAgICAgICAgY3VycmVudFN0YXRlID0gY29udGV4dC5Cb2R5Py5kYXRhPy5jdXJyZW50U3RhdGUKICAgICAgfQogICAgfSk7CiAgfQp9Cg=="
          }
        }
      }
    }  
  ]
}
